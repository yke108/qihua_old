!function(e){function t(i){if(a[i])return a[i].exports;var n=a[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};return t.m=e,t.c=a,t.p="js/",t(0)}([function(e,t,a){var i=a(1),n=a(6);$(function(){i("loginForm",n)})},function(e,t,a){var i=a(2),n=a(4),r=(a(5),function(e){function t(){var e=l.serializeArray(),t=n.param(e);v||delete t.captcha;var s={data:t};n.ajax(i.login,s).then(function(e){window.location.href=e.data.url},function(e){400==e.code&&(y.error(e.msg),v?a():r())})}function a(){f.show();var e=(new Date).getTime();p.attr("src",i.getVerify.url+e),c.val("")}function r(t){var r=e.trim(o.val());if(!v&&r){var s={data:{username:r}};n.ajax(i.getLoginCount,s).then(function(e){e.data.count>=3?(v=!0,a(),l.data("validator").options.ignore=null,l.validator("setField",{captcha:"ImgCode:required; imgCode; checkImgCode"})):v&&(v=!1,f.hide(),l.data("validator").options.ignore='input[name="captcha"]')})}}function s(n,s){l=e("#"+n),o=l.find('input[name="username"]'),u=l.find('input[name="password"]'),d=l.find(".submit"),p=e("#imgCode"),f=l.find(".form-item-code"),c=l.find('input[name="captcha"]'),m=e("#error-tips"),g=e("#emailActive"),h=s,l.validator({focusCleanup:!0,msgWrapper:"div",msgMaker:function(e){var t='<span class="msg-er"><i class="icon-error"></i>'+e.msg+"</span>";return t},target:function(e){return m.html(""),m},stopOnError:!0,invalid:function(t,a){e(window).scrollTop(200)},rules:{username:function(e,t,a){return!!/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/.test(e.value)||(!!/^[\w\+\-]+(\.[\w\+\-]+)*@[a-z\d\-]+(\.[a-z\d\-]+)*\.([a-z]{2,4})$/i.test(e.value)||/^[a-zA-Z][0-9a-zA-Z]{3,17}$/.test(e.value))},password:function(e,t,a){return!!/.{6,18}/.test(e.value)&&(!/^\d+$/.test(e.value)&&(!/^[a-z]+$/.test(e.value)&&(!/^[A-Z]+$/.test(e.value)&&!!/^[0-9a-zA-Z]{6,18}$/.test(e.value))))},imgCode:function(e){return!!/^[\d\w]{4}$/.test(e.value)},checkImgCode:function(t){return e.ajax({url:i.checkImgCode.url,type:"post",data:{captcha:t.value},dataType:"json"})}},messages:{username:"Username should combined by 4-18 English letters ( case-sensitive ) and digital components or phone number or email!",password:"Password should combined by 6-18 English letters ( case-sensitive ) and digital components!",captcha:"Please enter the right Verification Code!"},fields:{username:"Member Id:required; username; specialNames; checkUserName;",password:"Password:required; password;"},validation:function(e,t){t.isValid?m.removeClass("error"):m.addClass("error")},valid:function(e){t()}}),d.on("click",function(e){l.submit()}),o.on("change",function(){v=!1,r()}),p.on("click",a)}var l,o,u,d,c,p,f,m,g,h,v=!1,y={error:function(e){var t='<div class="msg-box" style="" for="username"><span class="msg-er"><i class="icon-error"></i>'+e+"</span></div>";m.addClass("error").html(t)},hide:function(){m.removeClass("error").html("")}};return s}(jQuery));e.exports=r},function(e,t,a){var i=a(3),n={checkUserName:{url:i.apiBasePath+"/User/Index/CheckUserName",data:{username:""}},checkPhone:{url:i.apiBasePath+"/User/Index/CheckPhone",data:{phone:"",act:"reg"}},checkEmail:{url:i.apiBasePath+"/User/Index/CheckEmail",data:{email:""}},sendEmail:{url:i.apiBasePath+"/User/Index/sendEmail",data:{email:""}},sendSms:{url:i.apiBasePath+"/User/Index/sendSms",data:{uv_r:"",phone:""}},getMsgCode:{url:i.apiBasePath+"/User/Index/code",data:{phone:"",timestamp:"",uv_r:""}},checkMsgCode:{url:i.apiBasePath+"/User/Index/CheckMsg",data:{country:"",msgCode:""}},checkImgCode:{url:i.apiBasePath+"/User/Index/CheckVerify",data:{captcha:""}},register:{url:i.apiBasePath+"/User/Index/register",data:{country:"",username:"",phone:"",email:"",password:"",repassword:"",msgCode:""}},login:{url:i.apiBasePath+"/User/Index/login",data:{username:"",password:"",captcha:""}},forget:{url:i.apiBasePath+"/User/Index/forgetPasswordStep",data:{captcha:"",mobile:"",msgCode:""}},forgetPassword:{url:i.apiBasePath+"/User/Index/forgetPasswordStep2",data:{newpass:"",repnewpass:""}},getLoginCount:{url:i.apiBasePath+"/User/Index/getCount",data:{username:""}},getVerify:{url:i.apiBasePath+"/User/index/verify/"},editPassword:{url:i.apiBasePath+"/User/AccountSecurity/editPassword",data:{old_password:"",password:"",newpassword:""}},editPhone:{url:i.apiBasePath+"/User/AccountSecurity/bindPhone",data:{phone:"",msgCode:""}},buyOfferRelease:{url:i.apiBasePath+"/User/Buyoffer/BuyOfferRelease",data:{title:"",type:"",content:"",expire:""}},buyOfferModify:{url:i.apiBasePath+"/User/Buyoffer/modify",data:{title:"",type:"",content:"",expire:"",id:""}},delBuyOffer:{url:i.apiBasePath+"/User/Buyoffer/delBuyOffer",data:{id:""}},delCollect:{url:i.apiBasePath+"/User/Collect/delCollect",data:{id:""}},checkCompanyName:{url:i.apiBasePath+"/User/Account/CheckCompanyNameOnly",data:{companyName:""}},insertInfo:{url:i.apiBasePath+"/User/Account/InsertInfo"},sendMessage:{url:i.apiBasePath+"/User/Message/sendMessage",data:{to:"",subject:"",content:""}},replyMessage:{url:i.apiBasePath+"/User/Message/reply",data:{to:"",subject:"",content:"",reply:""}},delMessage:{url:i.apiBasePath+"/User/Message/delMail",data:{id:""}},delSystemMessage:{url:i.apiBasePath+"/User/Message/delSystem",data:{id:""}},messageMark:{url:i.apiBasePath+"/User/Message/mark",data:{id:"",read:""}},checkEmailCode:{url:i.apiBasePath+"/AccountSecurity/EmailCode",date:{code:""}},submitAuthCard:{url:i.apiBasePath+"/User/Account/submit_auth",data:{}},addSupply:{url:i.apiBasePath+"/User/Supply/addSupply ",data:{title:"",type:"",content:"",expire:""}},supplyModify:{url:i.apiBasePath+"/User/Supply/modify ",data:{title:"",type:"",content:"",expire:"",id:""}},delSupplyOffer:{url:i.apiBasePath+"/User/Supply/delSupplyOffer",data:{id:""}},emailAct:{url:i.apiBasePath+"/User/Account/sendEmail",data:{email:""}}};e.exports=n},function(e,t){var a={apiBasePath:"",apiMember:""};e.exports=a},function(e,t){var a={ajax:function(e,t,a){if(a){if(a.prop("disabled"))return;a.prop("disabled",!0)}var i={url:"",type:"POST",dataType:"json"};$.ajaxSetup({beforeSend:function(e){$("#_ActionToken_").val()&&e.setRequestHeader("Actiontoken",$("#_ActionToken_").val())}});var n=$.extend(i,e,t);return $.ajax(n).then(function(e){return 200!=e.code?$.Deferred().reject(e).promise():$.Deferred().resolve(e).promise()},function(){console.log("服务器错误，请稍后再试"),$.Deferred().reject().promise()}).always(function(e){a&&a.prop("disabled",!1),600==e.code&&e.data&&e.data.token&&$("#_ActionToken_").val(e.data.token)})},getUrlParam:function(){var e={},t="",a="",i=[],n=0,r=0;if(a=location.search.substr(1),0!==a.length){for(i=a.split("&"),r=i.length;n<r;n++)t=i[n].split("=")[0],e[t]=i[n].split("=")[1];return e}},serializeParam:function(e){if(!e)return"";var t=[];for(var a in e){var i=e[a];"[object Array]"!=Object.prototype.toString.call(i)?t.push(a+"="+e[a]):t.push(a+"="+e[a].join(","))}return t.join("&")},param:function(e){var t={};if(0==e.length)return t;for(var a,i=0,n=e.length;i<n;i++)a=e[i],t[a.name]=a.value;return t}};e.exports=a},function(e,t){!function(t){"object"==typeof e&&e.exports&&(e.exports=t(jQuery))}(function(e,t){"use strict";function a(t,i){function n(){r._init(r.$el[0],i)}var r=this;return r instanceof a?(r.$el=e(t),void(r.$el.length?a.loading?e(window).on("validatorready",n):n():Q(t)&&(Y[t]=i))):new a(t,i)}function i(e,t){if(Z(e)){var a,n=t?t===!0?this:t:i.prototype;for(a in e)f(a)&&(n[a]=r(e[a]))}}function n(e,t){if(Z(e)){var a,i=t?t===!0?this:t:n.prototype;for(a in e)i[a]=e[a]}}function r(t){switch(e.type(t)){case"function":return t;case"array":var a=function(e){return t.msg=t[1],t[0].test(G(e))||t[1]||!1};return a.msg=t[1],a;case"regexp":return function(e){return t.test(G(e))}}}function s(t){var a,i,n;if(t&&t.tagName){switch(t.tagName){case"INPUT":case"SELECT":case"TEXTAREA":case"BUTTON":case"FIELDSET":a=t.form||e(t).closest("."+k);break;case"FORM":a=t;break;default:a=e(t).closest("."+k)}for(i in Y)if(e(a).is(i)){n=Y[i];break}return e(a).data(v)||e(a)[v](n).data(v)}}function l(e,t){var a=H(J(e,M+"-"+t));if(a)return a=new Function("return "+a)(),a?r(a):void 0}function o(e,t,a){var i=t.msg,n=t._r;return Z(i)&&(i=i[n]),Q(i)||(i=J(e,P+"-"+n)||J(e,P)||(a?Q(a)?a:a[n]:"")),i}function u(e){var t;return e&&(t=N.exec(e)),t&&t[0]}function d(e){if(Q(e)||Z(e)&&("error"in e||"ok"in e))return e}function c(e){return"INPUT"===e.tagName&&"checkbox"===e.type||"radio"===e.type}function p(e){return Date.parse(e.replace(/\.|\-/g,"/"))}function f(e){return/^\w+$/.test(e)}function m(e){return"#"===e.charAt(0)?e.replace(/(:|\.|\[|\])/g,"\\$1"):'[name="'+e+'"]:input'}var g,h,v="validator",y="."+v,_=".rule",b=".field",w=".form",k="nice-"+v,$="msg-box",x="aria-required",C="aria-invalid",M="data-rule",P="data-msg",A="data-tip",O="data-ok",B="data-timely",S="data-target",U="data-display",j="data-must",E="novalidate",V=":verifiable",T=/(&)?(!)?\b(\w+)(?:\[\s*(.*?\]?)\s*\]|\(\s*(.*?\)?)\s*\))?\s*(;|\|)?/g,I=/(\w+)(?:\[\s*(.*?\]?)\s*\]|\(\s*(.*?\)?)\s*\))?/,F=/(?:([^:;\(\[]*):)?(.*)/,q=/[^\x00-\xff]/g,N=/top|right|bottom|left/,R=/(?:(cors|jsonp):)?(?:(post|get):)?(.+)/i,D=/[<>'"`\\]|&#x?\d+[A-F]?;?|%3[A-F]/gim,z=e.noop,L=e.proxy,H=e.trim,W=e.isFunction,Q=function(e){return"string"==typeof e},Z=function(e){return e&&"[object Object]"===Object.prototype.toString.call(e)},X=document.documentMode||+(navigator.userAgent.match(/MSIE (\d+)/)&&RegExp.$1),J=function(e,a,i){return e&&e.tagName?i===t?e.getAttribute(a):void(null===i?e.removeAttribute(a):e.setAttribute(a,""+i)):null},G=function(t){return e(t).val()},K=window.console||{log:z,info:z},Y={},ee={debug:0,timely:1,theme:"def",ignore:"",focusInvalid:!0,beforeSubmit:z,msgWrapper:"span",msgMaker:function(t){var a;return a='<span role="alert" class="msg-wrap n-'+t.type+'">'+t.arrow,t.result?e.each(t.result,function(e,i){a+='<span class="n-'+i.type+'">'+t.icon+'<span class="n-msg">'+i.msg+"</span></span>"}):a+=t.icon+'<span class="n-msg">'+t.msg+"</span>",a+="</span>"},msgArrow:"",msgIcon:'<span class="n-icon"></span>',msgClass:"",validClass:"n-valid",invalidClass:"n-invalid"},te={def:{formClass:"n-default",msgClass:"n-right"}};e.fn[v]=function(t){var i=this,n=arguments;return i.is(":input")?i:(!i.is("form")&&(i=this.find("form")),!i.length&&(i=this),i.each(function(){var i=e(this).data(v);if(i)if(Q(t)){if("_"===t.charAt(0))return;i[t].apply(i,Array.prototype.slice.call(n,1))}else t&&(i._reset(!0),i._init(this,t));else new a(this,t)}),this)},e.fn.isValid=function(e,t){var a,i,n=s(this[0]),r=W(e);return!n||(n.checkOnly=!!t,i=n.options,a=n._multiValidate(this.is(":input")?this:this.find(V),function(t){t||!i.focusInvalid||n.checkOnly||n.$el.find("["+C+"]:first").focus(),r&&(e.length?e(t):t&&e()),n.checkOnly=!1}),r?this:a)},e.expr[":"].verifiable=function(e){var t=e.nodeName.toLowerCase();return("input"===t&&!{submit:1,button:1,reset:1,image:1}[e.type]||"select"===t||"textarea"===t)&&e.disabled===!1},e.expr[":"].filled=function(e){return!!H(G(e))},a.prototype={_init:function(t,a){var r,s,l,o=this;W(a)&&(a={valid:a}),a=a||{},l=J(t,"data-"+v+"-option"),l=l&&"{"===l.charAt(0)?new Function("return "+l)():{},s=te[a.theme||l.theme||ee.theme],r=o.options=e.extend({},ee,s,o.options,a,l),o.rules=new i(r.rules,!0),o.messages=new n(r.messages,!0),o.elements=o.elements||{},o.deferred={},o.errors={},o.fields={},o._initFields(r.fields),o.msgOpt={type:"error",pos:u(r.msgClass),wrapper:r.msgWrapper,cls:r.msgClass,style:r.msgStyle,arrow:r.msgArrow,icon:r.msgIcon,show:r.msgShow,hide:r.msgHide},Q(r.target)&&o.$el.find(r.target).addClass("msg-container"),o.$el.data(v)||(o.$el.data(v,o).addClass(k+" "+r.formClass).on("submit"+y+" validate"+y,L(o,"_submit")).on("reset"+y,L(o,"_reset")).on("showmsg"+y,L(o,"_showmsg")).on("hidemsg"+y,L(o,"_hidemsg")).on("focusin"+y+" click"+y,V,L(o,"_focusin")).on("focusout"+y+" validate"+y,V,L(o,"_focusout")),r.timely&&o.$el.on("keyup"+y+" input"+y+" compositionstart compositionend",V,L(o,"_focusout")).on("click"+y,":radio,:checkbox","click",L(o,"_focusout")).on("change"+y,'select,input[type="file"]',"change",L(o,"_focusout")),o._novalidate=J(t,E),J(t,E,E))},_guessAjax:function(t){var a=this;if(!(a.isAjaxSubmit=!!a.options.valid)){var i=(e._data||e.data)(t,"events");i&&i.valid&&e.map(i.valid,function(e){return~e.namespace.indexOf("form")?1:null}).length&&(a.isAjaxSubmit=!0)}},_initFields:function(t){var a=this,i=null===t;i&&(t=a.fields),Z(t)&&e.each(t,function(e,t){if(null===t||i){var n=a.elements[e];n&&a._resetElement(n,!0),delete a.fields[e]}else a.fields[e]=Q(t)?{rule:t}:t}),a.$el.find(V).each(function(){a._parse(this)})},_parse:function(e){var t,a,i=this,n=i.options,r=e.name,s=J(e,M);if(s&&J(e,M,null),(e.id&&"#"+e.id in i.fields||!r||null!==s&&(t=i.fields[r])&&s!==t.rule&&t.key!==e.id)&&(r="#"+e.id),r)return t=i.fields[r]||{},t.key=r,t.rule=s||t.rule||"",t.display||!(t.display=J(e,U))&&n.display&&(t.display=n.display),t.rule&&((null!==J(e,j)||/match\(|checked/.test(t.rule))&&(t.must=!0),~t.rule.indexOf("required")&&(t.required=!0,J(e,x,!0)),"showOk"in t||(t.showOk=n.showOk),a=J(e,B),a?t.timely=+a:"timely"in t&&J(e,B,+t.timely),t=i._parseRule(t),t.old={}),Q(t.target)&&J(e,S,t.target),Q(t.tip)&&J(e,A,t.tip),i.fields[r]=t},_parseRule:function(a){var i=F.exec(a.rule);if(i)return a._i=0,i[1]&&(a.display=i[1]),i[2]&&(a.rules=[],i[2].replace(T,function(){var i=arguments;i[4]=i[4]||i[5],a.rules.push({and:"&"===i[1],not:"!"===i[2],or:"|"===i[6],method:i[3],params:i[4]?e.map(i[4].split(", "),function(e){return H(e)}):t})})),a},_multiValidate:function(a,i){var n=this,r=n.options;return n.hasError=!1,r.ignore&&(a=a.not(r.ignore)),a.each(function(){if(n._validate(this),n.hasError&&r.stopOnError)return!1}),i&&(n.validating=!0,e.when.apply(null,e.map(n.deferred,function(e){return e})).done(function(){i.call(n,!n.hasError),n.validating=!1})),e.isEmptyObject(n.deferred)?!n.hasError:t},_submit:function(a){function i(){var e,t;h=!0,g&&(e=g.name)?(g.name="",t=s.submit,n.$el.append('<input type="hidden" name="'+e+'" value="'+g.value+'">'),t.call(s)):s.submit()}var n=this,r=n.options,s=a.target,l="submit"===a.type&&!a.isDefaultPrevented();a.preventDefault(),h&&~(h=!1)||n.submiting||"validate"===a.type&&n.$el[0]!==s||r.beforeSubmit.call(n,s)===!1||(n.isAjaxSubmit===t&&n._guessAjax(s),r.debug&&K.log("\n<<< event: "+a.type),n._reset(),n.submiting=!0,n._multiValidate(n.$el.find(V),function(t){var a,o=t||2===r.debug?"valid":"invalid";t||(r.focusInvalid&&n.$el.find("["+C+"]:first").focus(),a=e.map(n.errors,function(e){return e})),n.submiting=!1,n.isValid=t,W(r[o])&&r[o].call(n,s,a),n.$el.trigger(o+w,[s,a]),r.debug&&K.log(">>> "+o),t&&l&&!n.isAjaxSubmit&&i()}))},_reset:function(e){var t=this;t.errors={},e&&(t.reseting=!0,t.$el.find(V).each(function(e,a){t._resetElement(a)}),delete t.reseting)},_resetElement:function(e,t){this._setClass(e,null),this.hideMsg(e),t&&J(e,x,null)},_getTimely:function(e,t){var a=J(e,B);return null!==a?+a:+t.timely},_focusin:function(e){var t,a,i=this,n=i.options,r=e.target;i.validating||"click"===e.type&&document.activeElement===r||(n.focusCleanup&&"true"===J(r,C)&&(i._setClass(r,null),i.hideMsg(r)),a=J(r,A),a?i.showMsg(r,{type:"tip",msg:a}):(J(r,M)&&i._parse(r),t=i._getTimely(r,n),8!==t&&9!==t||i._focusout(e)))},_focusout:function(a,i){var n,r,s,l,o,u,d,p=this,f=p.options,m=a.target,g=a.type,h="focusin"===g,v="validate"===g,y=0;if("compositionstart"===g&&(p.pauseValidate=!0),"compositionend"===g&&(p.pauseValidate=!1),!p.pauseValidate&&(n=p.getField(m))){if(n._e=g,r=n.old,s=G(m),!i&&c(m)&&(i=p.$el.find('input[name="'+m.name+'"]').get(0)),d=p._getTimely(i||m,f),!v){if(!d)return;if(f.ignoreBlank&&!s&&!h)return void p.hideMsg(m);if("focusout"===g){if(2===d||8===d){if(!s)return;n.isValid&&!r.showOk?p.hideMsg(m):p._makeMsg(m,n,r)}}else{if(d<2&&!a.data)return;if(l=+new Date,l-(m._ts||0)<100||"keyup"===g&&"input"===m._et)return;if(m._ts=l,m._et=g,"keyup"===g){if(o=a.keyCode,u={8:1,9:1,16:1,32:1,46:1},9===o&&!s)return;if(o<48&&!u[o])return}h||(y=d>=100?d:400)}}f.ignore&&e(m).is(f.ignore)||(clearTimeout(n._t),n.value=s,d!==t&&(n.timely=d),y?n._t=setTimeout(function(){p._validate(m,n)},y):(v&&(n.old={}),p._validate(m,n)))}},_setClass:function(t,a){var i=e(t),n=this.options;n.bindClassTo&&(i=i.closest(n.bindClassTo)),i.removeClass(n.invalidClass+" "+n.validClass),null!==a&&i.addClass(a?n.validClass:n.invalidClass)},_showmsg:function(t,a,i){var n=this,r=t.target;e(r).is(":input")?n.showMsg(r,{type:a,msg:i}):"tip"===a&&n.$el.find(V+"["+A+"]",r).each(function(){n.showMsg(this,{type:a,msg:i})})},_hidemsg:function(t){var a=e(t.target);a.is(":input")&&this.hideMsg(a)},_validatedField:function(t,a,i){var n=this,r=n.options,s=a.isValid=i.isValid=!!i.isValid,l=s?"valid":"invalid";i.key=a.key,i.ruleName=a._r,i.id=t.id,i.value=G(t),s?i.type="ok":(n.submiting&&(n.errors[a.key]=i.msg),n.isValid=!1,n.hasError=!0),n.elements[a.key]=i.element=t,n.$el[0].isValid=s?n.isFormValid():s,a.old=i,W(a[l])&&a[l].call(n,t,i),W(r.validation)&&r.validation.call(n,t,i),e(t).attr(C,!s||null).trigger(l+b,[i,n]),n.$el.triggerHandler("validation",[i,n]),n.checkOnly||(n._setClass(t,i.skip||"tip"===i.type?null:s),n._makeMsg.apply(n,arguments))},_makeMsg:function(t,a,i){(a.msgMaker||this.options.msgMaker)&&(i=e.extend({},i),"focusin"===a._e&&(i.type="tip"),this[i.showOk||i.msg||"tip"===i.type?"showMsg":"hideMsg"](t,i,a))},_validatedRule:function(a,i,n,r){i=i||c.getField(a),r=r||{};var s,l,u,d,c=this,p=c.options,f=i._r,m=i.timely||p.timely,g=9===m||8===m,h=!1;if(null===n)return void c._validatedField(a,i,{isValid:!0,skip:!0});if(n===t?u=!0:n===!0||""===n?h=!0:Q(n)?s=n:Z(n)&&(n.error?s=n.error:(s=n.ok,h=!0)),l=i.rules[i._i],l.not&&(s=t,h="required"===f||!h),l.or)if(h)for(;i._i<i.rules.length&&i.rules[i._i].or;)i._i++;else u=!0;else l.and&&(i.isValid||(u=!0));u?h=!0:(h&&i.showOk!==!1&&(d=J(a,O),s=null===d?Q(i.ok)?i.ok:s:d,!Q(s)&&Q(i.showOk)&&(s=i.showOk),Q(s)&&(r.showOk=h)),h&&!g||(s=(o(a,i,s||l.msg||c.messages[f])||c.messages.fallback).replace(/\{0\|?([^\}]*)\}/,function(){return c._getDisplay(a,i.display)||arguments[1]||c.messages[0]})),h||(i.isValid=h),r.msg=s,e(a).trigger((h?"valid":"invalid")+_,[f,s])),!g||u&&!l.and||(h||i._m||(i._m=s),i._v=i._v||[],i._v.push({type:h?u?"tip":"ok":"error",msg:s||l.msg})),p.debug&&K.log("   "+i._i+": "+f+" => "+(h||s)),(h||g)&&i._i<i.rules.length-1?(i._i++,c._checkRule(a,i)):(i._i=0,g?(r.isValid=i.isValid,r.result=i._v,r.msg=i._m||"",i.value||"focusin"!==i._e||(r.type="tip")):r.isValid=h,c._validatedField(a,i,r),delete i._m,delete i._v)},_checkRule:function(a,i){var n,r,s,o=this,u=i.key,c=i.rules[i._i],p=c.method,f=G(a),m=c.params;o.submiting&&o.deferred[u]||(s=i.old,i._r=p,s&&!i.must&&!c.must&&c.result!==t&&s.ruleName===p&&s.id===a.id&&f&&s.value===f?n=c.result:(r=l(a,p)||o.rules[p]||z,n=r.call(o,a,m,i),r.msg&&(c.msg=r.msg)),Z(n)&&W(n.then)?(o.deferred[u]=n,i.isValid=t,n.then(function(n,r,s){var l,u=s.responseText,p=i.dataFilter||o.options.dataFilter||d;/jsonp?/.test(this.dataType)?u=n:"{"===H(u).charAt(0)&&(u=e.parseJSON(u)),l=p.call(this,u,i),l===t&&(l=p.call(this,u.data,i)),c.data=this.data,c.result=i.old?l:t,o._validatedRule(a,i,l)},function(e,t){o._validatedRule(a,i,o.messages[t]||t)}).always(function(){delete o.deferred[u]})):o._validatedRule(a,i,n))},_validate:function(e,t){var a=this;if(!e.disabled&&null===J(e,E)&&(t=t||a.getField(e),t&&(t.rules||a._parse(e),t.rules)))return a.options.debug&&K.info(t.key),t.isValid=!0,t.required||t.must||G(e)||c(e)?(a._checkRule(e,t),t.isValid):(a._validatedField(e,t,{isValid:!0}),!0)},test:function(e,a){var i,n,r,s=this,l=I.exec(a);return l&&(n=l[1],n in s.rules&&(r=l[2]||l[3],r=r?r.split(", "):t,i=s.rules[n].call(s,e,r))),i===!0||i===t||null===i},getRangeMsg:function(e,t,a,i){function n(e,t){return d?e>t:e>=t}if(t){var r,s=this,l=a.rules[a._i],o=s.messages[l.method]||"",u=t[0].split("~"),d="false"===t[1],c=u[0],p=u[1],f="rg",m=[""],g=H(e)&&+e===+e;return 2===u.length?c&&p?(g&&n(e,+c)&&n(+p,e)&&(r=!0),m=m.concat(u),f=d?"gtlt":"rg"):c&&!p?(g&&n(e,+c)&&(r=!0),m.push(c),f=d?"gt":"gte"):!c&&p&&(g&&n(+p,e)&&(r=!0),m.push(p),f=d?"lt":"lte"):(e===+c&&(r=!0),m.push(c),f="eq"),o&&(i&&o[f+i]&&(f+=i),m[0]=o[f]),r||(l.msg=s.renderMsg.apply(null,m))}},renderMsg:function(){var e=arguments,t=e[0],a=e.length;if(t){for(;--a;)t=t.replace("{"+a+"}",e[a]);return t}},_getDisplay:function(e,t){return Q(t)?t:W(t)?t.call(this,e):""},_getMsgOpt:function(t){return e.extend({},this.msgOpt,Q(t)?{msg:t}:t)},_getMsgDOM:function(t,a){var i,n,r,s,l=e(t);if(l.is(":input")?(r=a.target||J(t,S),r&&(r=W(r)?r.call(this,t):this.$el.find(r),r.length&&(r.is(":input")?t=r.get(0):r.hasClass($)?i=r:s=r)),i||(n=c(t)&&t.name||!t.id?t.name:t.id,i=this.$el.find(a.wrapper+"."+$+'[for="'+n+'"]'))):i=l,!i.length)if(l=this.$el.find(r||t),i=e("<"+a.wrapper+">"),i.attr("class",$+(a.cls?" "+a.cls:"")),i.attr("style",a.style||""),i.attr("for",n),c(t)){var o=l.parent();i.appendTo(o.is("label")?o.parent():o)}else s?i.appendTo(s):i[a.pos&&"right"!==a.pos?"insertBefore":"insertAfter"](l);return i},showMsg:function(t,a,i){if(t){var n,r,s,l=this,o=l.options;if(Z(t)&&!t.jquery&&!a)return void e.each(t,function(e,t){var a=l.elements[e]||l.$el.find(m(e))[0];l.showMsg(a,t)});a=l._getMsgOpt(a),t=e(t).get(0),a.msg||"error"===a.type||(r=J(t,"data-"+a.type),null!==r&&(a.msg=r)),Q(a.msg)&&(e(t).is(V)&&(i=i||l.getField(t),i&&(a.style=i.msgStyle||a.style,a.cls=i.msgClass||a.cls,a.wrapper=i.msgWrapper||a.wrapper,a.target=i.target||o.target)),(n=(i||{}).msgMaker||o.msgMaker)&&(s=l._getMsgDOM(t,a),!N.test(s[0].className)&&s.addClass(a.cls),6===X&&"bottom"===a.pos&&(s[0].style.marginTop=e(t).outerHeight()+"px"),s.html(n.call(l,a))[0].style.display="",W(a.show)&&a.show.call(l,s,a.type)))}},hideMsg:function(t,a,i){var n,r=this,s=r.options;t=e(t).get(0),a=r._getMsgOpt(a),e(t).is(V)&&(i=i||r.getField(t),i&&((i.isValid||r.reseting)&&J(t,C,null),a.wrapper=i.msgWrapper||a.wrapper,a.target=i.target||s.target)),n=r._getMsgDOM(t,a),n.length&&(W(a.hide)?a.hide.call(r,n,a.type):(n[0].style.display="none",n[0].innerHTML=null))},getField:function(e){var t,a=this;if(Q(e))t=e;else{if(J(e,M))return a._parse(e);t=e.id&&"#"+e.id in a.fields||!e.name?"#"+e.id:e.name}return a.fields[t]},setField:function(e,t){var a={};e&&(Q(e)?a[e]=t:a=e,this._initFields(a))},isFormValid:function(){var e,t,a=this.fields;for(e in a)if(t=a[e],t.rules&&(t.required||t.must||G(m(e)))&&!t.isValid)return t.isValid;return!0},holdSubmit:function(e){this.submiting=e===t||e},cleanUp:function(){this._reset(1)},destroy:function(){this._reset(1),this.$el.off(y).removeData(v),J(this.$el[0],E,this._novalidate)}},e(window).on("beforeunload",function(){this.focus()}),e(document).on("click",":submit",function(){var e,t=this;t.form&&(g=t,e=t.getAttributeNode("formnovalidate"),(e&&null!==e.nodeValue||null!==J(t,E))&&(h=!0))}).on("focusin submit validate","form,."+k,function(t){if(null===J(this,E)){var a,i=e(this);i.data(v)||(a=s(this),e.isEmptyObject(a.fields)?(J(this,E,E),i.off(y).removeData(v)):"focusin"===t.type?a._focusin(t):a._submit(t))}}),new n({fallback:"This field is not valid.",loading:"Validating..."}),new i({required:function(t,a,i){var n=this,r=H(G(t)),s=!0;if(a)if(1===a.length){if(f(a[0])){if(n.rules[a[0]]){if(!r&&!n.test(t,a[0]))return J(t,x,null),null;J(t,x,!0)}}else if(!r&&!e(a[0],n.$el).length)return null}else if("not"===a[0])e.each(a.slice(1),function(){return s=r!==H(this)});else if("from"===a[0]){var l,u=n.$el.find(a[1]),d="_validated_";return s=u.filter(function(){return!!H(G(this))}).length>=(a[2]||1),s?r||(l=null):l=o(u[0],i)||!1,e(t).data(d)||u.data(d,1).each(function(){t!==this&&n._checkRule(this,n.getField(this))}).removeData(d),l}return s&&!!r},integer:function(e,t){var a,i="0|",n="[1-9]\\d*",r=t?t[0]:"*";switch(r){case"+":a=n;break;case"-":a="-"+n;break;case"+0":a=i+n;break;case"-0":a=i+"-"+n;break;default:a=i+"-?"+n}return a="^(?:"+a+")$",new RegExp(a).test(G(e))||this.messages.integer[r]},match:function(t,a,i){if(a){var n,r,s,l,o,u,d,c,f=this,g="eq";if(1===a.length?s=a[0]:(g=a[0],s=a[1]),u=m(s),d=f.$el.find(u)[0]){if(c=f.getField(d),n=G(t),r=G(d),i._match||(f.$el.on("valid"+b+y,u,function(){e(t).trigger("validate")}),i._match=c._match=1),!i.required&&""===n&&""===r)return null;if(o=a[2],o&&(/^date(time)?$/i.test(o)?(n=p(n),r=p(r)):"time"===o&&(n=+n.replace(/:/g,""),r=+r.replace(/:/g,""))),"eq"!==g&&!isNaN(+n)&&isNaN(+r))return!0;switch(l=f.messages.match[g].replace("{1}",f._getDisplay(t,c.display||s)),g){case"lt":return+n<+r||l;case"lte":return+n<=+r||l;case"gte":return+n>=+r||l;case"gt":return+n>+r||l;case"neq":return n!==r||l;default:return n===r||l}}}},range:function(e,t,a){return this.getRangeMsg(G(e),t,a)},checked:function(e,t,a){if(c(e)){var i,n,r=this;return e.name?n=r.$el.find('input[name="'+e.name+'"]').filter(function(){var e=this;return!i&&c(e)&&(i=e),!e.disabled&&e.checked}).length:(i=e,n=i.checked),t?r.getRangeMsg(n,t,a):!!n||o(i,a,"")||r.messages.required}},length:function(e,t,a){var i=G(e),n=("true"===t[1]?i.replace(q,"xx"):i).length;return this.getRangeMsg(n,t,a,t[1]?"_2":"")},remote:function(t,a,i){if(a){var n,r=this,s=R.exec(a[0]),l=i.rules[i._i],o={},u="",d=s[3],c=s[2]||"POST",p=(s[1]||"").toLowerCase();return l.must=!0,o[t.name]=G(t),a[1]&&e.map(a.slice(1),function(e){var t,a;~e.indexOf("=")?u+="&"+e:(t=e.split(":"),e=H(t[0]),a=H(t[1])||e,o[e]=r.$el.find(m(a)).val())}),o=e.param(o)+u,!i.must&&l.data&&l.data===o?l.result:("cors"!==p&&/^https?:/.test(d)&&!~d.indexOf(location.host)&&(n="jsonp"),e.ajax({url:d,type:c,data:o,dataType:n}))}},validate:function(t,a){var i="_validated_";a&&!e(t).data(i)&&this.$el.find(e.map(a,function(e){return m(e)}).join(",")).data(i,1).trigger("validate").removeData(i)},filter:function(e,t){var a,i=G(e);a=i.replace(t?new RegExp("["+t[0]+"]","gm"):D,""),a!==i&&(e.value=a)}}),a.config=function(t){e.each(t,function(e,t){"rules"===e?new i(t):"messages"===e?new n(t):ee[e]=t})},a.setTheme=function(t,a){Z(t)?e.extend(!0,te,t):Q(t)&&Z(a)&&(te[t]=e.extend(te[t],a))},e[v]=a}),$.validator.config({theme:"simple_bottom",rules:{digits:[/^\d+$/,"请填写数字"],letters:[/^[a-z]+$/i,"请填写字母"],date:[/^\d{4}-\d{2}-\d{2}$/,"请填写有效的日期，格式:yyyy-mm-dd"],time:[/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/,"请填写有效的时间，00:00到23:59之间"],email:[/^[\w\+\-]+(\.[\w\+\-]+)*@[a-z\d\-]+(\.[a-z\d\-]+)*\.([a-z]{2,4})$/i,"Please enter the Email Address in correct format!"],url:[/^(https?|s?ftp):\/\/\S+$/i,"请填写有效的网址"],qq:[/^[1-9]\d{4,}$/,"请填写有效的QQ号"],IDcard:[/^\d{6}(19|2\d)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)?$/,"请填写正确的身份证号码"],tel:[/^(?:(?:0\d{2,3}[\- ]?[1-9]\d{6,7})|(?:[48]00[\- ]?[1-9]\d{6}))$/,"请填写有效的电话号码"],mobile:[/^1[3-9]\d{9}$/,"Please enter the phone number in correct format!"],zipcode:[/^\d{6}$/,"请检查邮政编码格式"],chinese:[/^[\u0391-\uFFE5]+$/,"请填写中文字符"],username:[/^\w{3,12}$/,"请填写3-12位数字、字母、下划线"],password:[/^[\S]{6,16}$/,"请填写6-16位字符，不能包含空格"],accept:function(e,t){if(!t)return!0;var a=t[0],i=$(e).val();return"*"===a||new RegExp(".(?:"+a+")$","i").test(i)||this.renderMsg("只接受{1}后缀的文件",a.replace(/\|/g,","))}},messages:{0:"该字段",fallback:"Please enter the {0}in correct format!",error:"网络异常",timeout:"请求超时",required:"Please enter a Valid {0}.",remote:"{0}已被使用",integer:{"*":"请填写整数","+":"请填写正整数","+0":"请填写正整数或0","-":"请填写负整数","-0":"请填写负整数或0"},match:{eq:"{0}与{1}不一致",neq:"{0}与{1}不能相同",lt:"{0}必须小于{1}",gt:"{0}必须大于{1}",lte:"{0}不能大于{1}",gte:"{0}不能小于{1}"},range:{rg:"请填写{1}到{2}的数",gte:"请填写不小于{1}的数",lte:"请填写最大{1}的数",gtlt:"请填写{1}到{2}之间的数",gt:"请填写大于{1}的数",lt:"请填写小于{1}的数"},checked:{eq:"请选择{1}项",rg:"请选择{1}到{2}项",gte:"请至少选择{1}项",lte:"请最多选择{1}项"},length:{eq:"请填写{1}个字符",rg:"请填写{1}到{2}个字符",gte:"at least {1} ch",lte:"请最多填写{1}个字符",eq_2:"",rg_2:"",gte_2:"",lte_2:""}}})},function(e,t,a){var i;!function(){function n(e,t){return(/string|function/.test(typeof t)?c:d)(e,t)}function r(e,t){return"string"!=typeof e&&(t=typeof e,"number"===t?e+="":e="function"===t?r(e.call(e)):""),e}function s(e){return g[e]}function l(e){return r(e).replace(/&(?![\w#]+;)|[<>"']/g,s)}function o(e,t){if(h(e))for(var a=0,i=e.length;a<i;a++)t.call(e,e[a],a,e);else for(a in e)t.call(e,e[a],a)}function u(e,t){var a=/(\/)[^\/]+\1\.\.\1/,i=("./"+e).replace(/[^\/]+$/,""),n=i+t;for(n=n.replace(/\/\.\//g,"/");n.match(a);)n=n.replace(a,"/");return n}function d(e,t){var a=n.get(e)||p({filename:e,name:"Render Error",message:"Template not found"});return t?a(t):a}function c(e,t){if("string"==typeof t){var a=t;t=function(){return new m(a)}}var i=f[e]=function(a){try{return new t(a,e)+""}catch(e){return p(e)()}};return i.prototype=t.prototype=v,i.toString=function(){return t+""},i}function p(e){var t="{Template Error}",a=e.stack||"";if(a)a=a.split("\n").slice(0,2).join("\n");else for(var i in e)a+="<"+i+">\n"+e[i]+"\n\n";return function(){return"object"==typeof console&&console.error(t+"\n\n"+a),t}}var f=n.cache={},m=this.String,g={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},h=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},v=n.utils={$helpers:{},$include:function(e,t,a){return e=u(a,e),d(e,t)},$string:r,$escape:l,$each:o},y=n.helpers=v.$helpers;n.get=function(e){return f[e.replace(/^\.\//,"")]},n.helper=function(e,t){y[e]=t},i=function(){return n}.call(t,a,t,e),!(void 0!==i&&(e.exports=i)),n("emailAct",function(e,t){"use strict";var a=this,i=(a.$helpers,a.$escape),n=e.email,r="";return r+=' <div id="emailActive" class="email-active"> <p class="b-tips">A confirmation email has been sent to your <br> mailbox <b data-text="\'email">',r+=i(n),r+='</b></p> <p class="tips">Please check your email box and continue your registration within 48hours.</p> <div class="btns"> <p class="tips">if you couldn\'t receive the email</p> <span class="btn-link send-again">send again</span> </div> <div class="btns out-bar"> <span class="btn-link">send out email</span> <span class="tips">5 minutes later, can send again</span> </div> </div>',new m(r)})}()}]);