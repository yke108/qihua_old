!function(e){function a(r){if(t[r])return t[r].exports;var n=t[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}var t={};return a.m=e,a.c=t,a.p="js/",a(0)}([function(e,a,t){$(function(){function e(e){"Q_TYPE_DENIED"==e&&alert("仅支持jpg、png、pdf、jpeg格式的图片或文件"),"F_EXCEED_SIZE"==e&&alert("文件大小不能超过8M")}function a(e){return{auto:!0,server:"/Home/Image/webUploader",fileSingleSizeLimit:8388608,duplicate:!0,compress:{allowMagnify:!1,crop:!1,preserveHeaders:!1,noCompressIfLarger:!1,compressSize:0},pick:e,innerHTML:"选择文件",accept:{title:"Images",extensions:"jpg,jpeg,png,gif,pdf",mimeTypes:"image/*"}}}var r=t(1),n=t(3);$('input[name="type"]').on("change",function(){var e=$(this).val(),a=$("li.spt");2==e?a.css("visibility","hidden"):a.css("visibility","visible")}),$(".hock_upload").each(function(t,r){var n=$(this),o=n.attr("id"),i=WebUploader.create(a("#"+o));i.on("startUpload",function(){n.find(".webuploader-pick").append('<span class="uploading-tips">Uploading...</span>')}),i.on("uploadSuccess",function(e,a){if(200==a.code){$(".uploading-tips").remove();var t=n.next(),r=n.find(".uploaded");t.val(a.data[0].url),t.trigger("validate"),i.makeThumb(e,function(e,a){return e?void r.replaceWith("<span>不能预览</span>"):void r.attr("src",a)},140,100)}}),i.on("error",function(a){e(a)})}),$(".hock_submit").on("click",function(){var e={},a=$('input[name="type"]:checked').val();e=1==a?{businessCert:"营业执照:required;",codeCert:"组织机构代码证:required;",taxCert:"税务登记证:required;"}:{businessCert:"营业执照:required;"},$("form").validator({focusCleanup:!0,fields:e,valid:function(){var e=$("#businessCertInput").val(),t=$("#codeCertInput").val(),o=$("#taxCertInput").val(),i={data:{type:a,businessCert:e,codeCert:t,taxCert:o}};n.ajax(r.submitAuthCard,i,$(".hock_submit")).then(function(e){$("form.info").hide(),$(".succ-info").show()},function(e){alert(e.msg),$("#_ActionToken_").val(e.data.token)})},messages:{required:"请上传{0}"}}),$("form").trigger("submit")})})},function(e,a,t){var r=t(2),n={checkCompanyName:{url:r.apiBasePath+"/Home/Account/checkCompanyName",data:{companyName:""}},checkPhone:{url:r.apiBasePath+"/Home/User/CheckPhone",data:{phone:"",act:""}},getMsgCode:{url:r.apiBasePath+"/Home/user/code",data:{phone:"",timestamp:"",uv_r:""}},checkMsgCode:{url:r.apiBasePath+"/Home/User/CheckMsg",data:{msgCode:""}},register:{url:r.apiBasePath+"/User/register",data:{companyName:"",contact:"",phone:"",password:"",msgcode:""}},login:{url:r.apiBasePath+"/user/login",data:{username:"",password:""}},accountInfo:{url:r.apiBasePath+"/Account/insertInfo",data:{companyName:"",contact:""}},submitAuthCard:{url:r.apiBasePath+"/Account/submit_auth",data:{type:"",businessCert:"",codeCert:"",taxCert:""}},forumRegister:{url:r.apiBasePath+"/forum/register",data:{companyName:"",contact:"",phone:""}},forumPhoneCheck:{url:r.apiBasePath+"/forum/checkPhone",data:{phone:""}}};e.exports=n},function(e,a){var t={apiBasePath:"",apiMember:""};e.exports=t},function(e,a){var t={ajax:function(e,a,t){if(t){if(t.prop("disabled"))return;t.prop("disabled",!0),t.addClass("ajax-loading")}var r={url:"",type:"POST",dataType:"json"};$.ajaxSetup({beforeSend:function(e){$("#_ActionToken_").val()&&e.setRequestHeader("Actiontoken",$("#_ActionToken_").val())}});var n=$.extend(r,e,a);return $.ajax(n).then(function(e){return 200!=e.code?$.Deferred().reject(e).promise():$.Deferred().resolve(e).promise()},function(){console.log("服务器错误，请稍后再试"),$.Deferred().reject().promise()}).always(function(e){t&&(t.prop("disabled",!1),t.removeClass("ajax-loading")),600==e.code&&e.data&&e.data.token&&$("#_ActionToken_").val(e.data.token)})},getUrlParam:function(){var e={},a="",t="",r=[],n=0,o=0;if(t=location.search.substr(1),0!==t.length){for(r=t.split("&"),o=r.length;n<o;n++)a=r[n].split("=")[0],e[a]=encodeURIComponent(r[n].split("=")[1]);return e}},serializeParam:function(e){if(!e)return"";var a=[];for(var t in e){var r=e[t];"[object Array]"!=Object.prototype.toString.call(r)?a.push(t+"="+e[t]):a.push(t+"="+e[t].join(","))}return a.join("&")},param:function(e){var a={};if(0==e.length)return a;for(var t,r=0,n=e.length;r<n;r++)t=e[r],a[t.name]=t.value;return a}};e.exports=t}]);